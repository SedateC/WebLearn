<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
  <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
<div id="app">
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3>添加品牌</h3>
    </div>
    <div class="panel-body form-inline">
      <label>
        id:
        <input type="text" class="form-control" v-model="id">
      </label>

      <label>
        name:
        <input type="text" class="form-control"v-model="name">
      </label>
      <label>
        <input type="button" value="添加" class="btn btn-primary" @click="onclick"/>
      </label>
      <label>
        搜索名称关键字:
        <input type="text" class="form-control" v-model="keywords" >
        <input type="button" class="btn btn-primary" value="搜索" @click="search(keywords)">
      </label>
    </div>
  </div>

  <table class="table table-hover tab table-bordered table-striped">
    <thead>
    <tr>
      <th>id</th>
      <th>name</th>
      <th>ctime</th>
      <th></th>
    </tr>
    </thead>
    <tbody>
    <!--之前数据是 data 中list渲染-->
    <tr v-for="item in search(keywords)" :key="item.id"><!--记得加绑定-->
      <td v-text="item.id"></td>
      <td>{{item.name}}</td>
      <td>{{item.ctime}}</td>
      <td ><input type="button" value="删除"@click="ondel(item.id)"></td>
    </tr>
    </tbody>
  </table>
</div>
<script>
  var vm = new Vue({
    el:app,
    data:{
      id:'',
      name:'',
      contentKey:'',
      keywords:"",
      list:[
        {id:1,name:'奔驰',ctime:new Date()},
        {id:2,name:'宝马',ctime:new Date()},
        {id:3,name:'路虎',ctime:new Date()}
      ],

    },
    methods:{
      onclick:function () {
        var car = {id:this.id,name:this.name,ctime:new Date()};
        this.list.push(car)
        this.id = this.name = '';
      },
      ondel:function(id){
        var index = this.list.findIndex(item =>{
          if (item.id == id){
            return true;
          }
        })
        this.list.splice(index,1);
      },
      /*     search(keywords) {
             console.log("  search(keywords) ")
             var newList = []
             this.list.forEach(item =>{
               if (item.name.indexOf(keywords) != -1){ //如果为空返回0
                 console.log(item.name)
                 newList.push(item);
               }
             })
             return newList;
             学习forEach方法
             */
      search(keywords){//学习some可以通过return true终止  filter得到新数组 findIndex得到索引方法\
        var newlist =  this.list.filter(item =>{
          if (item.name.includes(keywords)){//ES6中字符串提供新方法 String.prototype.includes 要包含的字符串
            return item;
          }
        })
        return newlist;
      }
    }
  });


</script>
</body>
</html>
